import { useState, useRef, useEffect } from "preact/hooks";
import type { FunctionalComponent } from "preact";

type IconProps = {
    className?: string;
};

const WindowsIcon: FunctionalComponent<IconProps> = ({
    className = "w-6 h-6",
}) => (
    <svg className={className} viewBox="0 0 88 88" fill="currentColor">
        <path d="M0 12.402l35.687-4.86.016 34.423-35.67.203zm35.67 33.529l.028 34.453L.028 75.48.026 45.7zm4.326-39.025L87.314 0v41.527l-47.318.376zm47.329 39.349l-.011 41.34-47.318-6.678-.066-34.739z" />
    </svg>
);

const AppleIcon: FunctionalComponent<IconProps> = ({
    className = "w-6 h-6",
}) => (
    <svg className={className} viewBox="0 0 24 24" fill="currentColor">
        <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z" />
    </svg>
);

const LinuxIcon: FunctionalComponent<IconProps> = ({
    className = "w-6 h-6",
}) => (
    <svg
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 25"
        height="24"
        width="24"
        className={className}
    >
        <path
            d="M10.0601 5.8599C9.98726 5.86386 9.92551 5.9074 9.89623 5.96993L9.89543 5.97152C9.86377 6.03853 9.83369 6.07204 9.8052 6.07204C9.76984 6.07943 9.75216 6.06175 9.75216 6.01901C9.75216 5.93458 9.81918 5.88154 9.95322 5.8599H10.0601ZM10.9815 6.00793C10.953 6.01532 10.9123 5.99236 10.8596 5.93906C10.8271 5.90423 10.7812 5.88207 10.7305 5.88207C10.71 5.88207 10.691 5.88523 10.6728 5.89157H10.6743C10.8432 5.81399 10.9564 5.82085 11.0139 5.91215C11.021 5.92244 11.025 5.93431 11.025 5.94777C11.025 5.97547 11.0076 5.99843 10.983 6.00714H10.9823L10.9815 6.00793ZM7.2611 10.5349C7.25635 10.5333 7.2516 10.5325 7.24606 10.5325C7.22389 10.5325 7.2049 10.5468 7.19777 10.5658C7.18036 10.6022 7.16452 10.6465 7.15186 10.6924L7.15028 10.6988C7.13524 10.7534 7.11545 10.8009 7.09012 10.8452L7.0917 10.842C7.05845 10.8935 7.02363 10.9386 6.98484 10.9806L6.98563 10.9798C6.91492 11.0573 6.91122 11.0996 6.97455 11.1064C7.00305 11.1138 7.04711 11.089 7.10674 11.032C7.16294 10.9798 7.20806 10.9164 7.23814 10.8452L7.23972 10.842C7.24711 10.8209 7.25397 10.7961 7.2603 10.7676C7.26585 10.7431 7.27297 10.7225 7.28168 10.7019L7.28089 10.7043C7.28801 10.6908 7.29355 10.675 7.29672 10.6584V10.6568C7.29988 10.6441 7.30147 10.6299 7.30147 10.6149V10.5832L7.29038 10.5563L7.2611 10.5349ZM16.3245 14.3408C16.3245 14.2141 16.1301 14.0664 15.7412 13.8975C15.7697 13.7914 15.7963 13.6943 15.8211 13.6062C15.8441 13.5278 15.8631 13.4344 15.8734 13.3386L15.8741 13.3307C15.8847 13.2352 15.8953 13.1592 15.9058 13.1027C15.9121 13.0608 15.9161 13.0117 15.9161 12.9626C15.9161 12.9278 15.9145 12.8938 15.9106 12.8597V12.8637C15.9032 12.7613 15.8995 12.6925 15.8995 12.6571C15.8924 12.57 15.8789 12.4909 15.8599 12.4133L15.8623 12.4236C15.8375 12.3033 15.8232 12.231 15.8195 12.2067C15.8158 12.1824 15.7982 12.0943 15.7665 11.9423C15.7348 11.7903 15.7153 11.6967 15.7079 11.6613C15.6058 11.2449 15.434 10.88 15.2029 10.5602L15.2092 10.5697C15.0129 10.2484 14.7572 9.98239 14.4557 9.78054L14.4462 9.775C14.6908 10.0236 14.8934 10.3148 15.0422 10.6354L15.0501 10.6544C15.4546 11.2679 15.6953 12.0207 15.6953 12.8297C15.6953 13.1027 15.6675 13.3695 15.6153 13.6268L15.6193 13.6014C15.571 13.8547 15.3525 14.0431 15.0897 14.0447C14.8707 14.0732 14.7348 14.0078 14.682 13.8484C14.6266 13.6204 14.595 13.3584 14.595 13.0893C14.595 13.0442 14.5958 12.9998 14.5973 12.9555V12.9619C14.5973 12.9547 14.5973 12.946 14.5973 12.9365C14.5973 12.5431 14.553 12.1608 14.4683 11.7927L14.4747 11.8267C14.4082 11.5299 14.3369 11.2853 14.253 11.0463L14.2681 11.0953C14.2063 10.9085 14.1367 10.7486 14.0535 10.5974L14.0615 10.6125C13.9976 10.5032 13.943 10.4167 13.8976 10.3528C13.8556 10.2935 13.8097 10.2412 13.7599 10.1945L13.7591 10.1937L13.6839 10.1193C13.5936 9.69742 13.4804 9.33251 13.3388 8.98185L13.3554 9.02776C13.2715 8.80137 13.1654 8.60506 13.0372 8.42696L13.0419 8.43408C12.9564 8.33118 12.8741 8.21719 12.8005 8.09687L12.7934 8.08421C12.6857 7.91719 12.6216 7.71376 12.6216 7.49449C12.6216 7.34963 12.6493 7.2119 12.7 7.08525L12.6976 7.09237C12.7387 6.99105 12.7633 6.87311 12.7633 6.74963C12.7633 6.68472 12.757 6.62218 12.7443 6.56123L12.7451 6.56757C12.706 6.44725 12.5488 6.35912 12.2733 6.30318C12.0936 6.2549 11.9369 6.18999 11.7912 6.10766L11.8015 6.11321C11.6947 6.05146 11.5712 5.99447 11.4414 5.94856L11.4255 5.94381C11.3691 5.93642 11.3303 5.8446 11.3092 5.66834C11.3052 5.63431 11.3028 5.59473 11.3028 5.55515C11.3028 5.4 11.3361 5.25356 11.3962 5.12137L11.3939 5.1277C11.4485 4.96464 11.5965 4.84749 11.773 4.84116C11.7968 4.8372 11.8253 4.83482 11.853 4.83482C12.0643 4.83482 12.244 4.96781 12.3137 5.15462L12.3145 5.15778C12.3683 5.26227 12.4 5.38496 12.4 5.51557C12.4 5.60739 12.3841 5.69605 12.3556 5.77837L12.3572 5.77283C12.2796 5.90687 12.2728 6.00054 12.3366 6.05384C12.4005 6.10714 12.506 6.10872 12.6533 6.05859C12.7451 6.03009 12.791 5.90344 12.791 5.67864V5.28443C12.7609 5.08575 12.711 4.90765 12.6422 4.73825L12.6477 4.75408C12.5978 4.62585 12.5219 4.5174 12.4253 4.43112L12.4245 4.43033C12.3533 4.36701 12.2709 4.31397 12.1815 4.2736L12.1751 4.27123C12.0936 4.23798 11.9978 4.21028 11.8981 4.19286L11.8894 4.19128C11.1332 4.24774 10.8187 4.7211 10.9458 5.61135C10.9474 5.62639 10.9482 5.64301 10.9482 5.66043C10.9482 5.69922 10.9435 5.73721 10.934 5.77362L10.9348 5.77046C10.8516 5.7008 10.744 5.65885 10.6261 5.65885C10.6245 5.65885 10.6229 5.65885 10.6213 5.65885C10.5754 5.6541 10.5231 5.65172 10.4693 5.65172C10.3997 5.65172 10.3308 5.65647 10.2635 5.66518L10.2714 5.66439C10.1833 5.67811 10.1287 5.66043 10.1076 5.61135C10.1099 5.57177 10.1115 5.52507 10.1115 5.47837C10.1115 5.18074 10.0474 4.89815 9.93264 4.64406L9.93818 4.65672C9.86061 4.45804 9.68013 4.31635 9.46324 4.29656H9.46086C9.45691 4.29656 9.45216 4.29656 9.44741 4.29656C9.25426 4.29656 9.08962 4.41608 9.02233 4.58469L9.02154 4.58785C8.92497 4.7715 8.86165 4.9876 8.8474 5.21636V5.22111C8.84661 5.23694 8.84661 5.25594 8.84661 5.27494C8.84661 5.39446 8.86085 5.51161 8.88698 5.62323L8.8846 5.61293C8.9131 5.76254 8.96059 5.89552 9.02629 6.01822L9.02233 6.0103C9.08249 6.11954 9.13711 6.1673 9.18619 6.15358C9.26139 6.12825 9.32155 6.07521 9.35479 6.00714L9.35558 6.00555C9.38408 5.9417 9.35928 5.91347 9.28118 5.92085C9.23157 5.92085 9.17695 5.86967 9.11732 5.76729C9.05795 5.66518 9.02154 5.54328 9.01679 5.41346V5.41188C9.01521 5.39605 9.01442 5.37784 9.01442 5.35884C9.01442 5.23298 9.05083 5.11583 9.11416 5.01688L9.11257 5.01926C9.18223 4.92665 9.29305 4.86728 9.41653 4.86728C9.43632 4.86728 9.45611 4.86886 9.47511 4.87203H9.47274C9.6073 4.88073 9.71812 4.97018 9.75849 5.09287L9.75928 5.09525C9.82261 5.21557 9.85981 5.35805 9.85981 5.50845V5.51636C9.85981 5.59552 9.85427 5.67389 9.84319 5.74988L9.84398 5.74117C9.71416 5.82349 9.60493 5.9256 9.51786 6.04513L9.51548 6.0483C9.43791 6.1512 9.34054 6.23432 9.22893 6.29447L9.22418 6.29685C9.08645 6.37812 9.01415 6.42218 9.00729 6.42904C8.92893 6.50503 8.87194 6.60239 8.84423 6.71084L8.84344 6.7148C8.83869 6.72984 8.83552 6.74646 8.83552 6.76387C8.83552 6.82562 8.87114 6.87865 8.9226 6.90398L8.92339 6.90477C9.02471 6.96335 9.11257 7.03142 9.18856 7.11058C9.24872 7.17153 9.30492 7.23723 9.35479 7.30689L9.35796 7.31164C9.40783 7.37496 9.47432 7.42246 9.5511 7.44858L9.55427 7.44937C9.66588 7.49133 9.7949 7.51666 9.92947 7.51824H9.93026C9.95401 7.51903 9.98251 7.51903 10.0102 7.51903C10.368 7.51903 10.7123 7.46045 11.0337 7.3528L11.0108 7.35913C11.0245 7.35175 11.1057 7.32694 11.2546 7.28473C11.4034 7.24251 11.5253 7.20531 11.6203 7.17311C11.7422 7.13037 11.8451 7.08367 11.944 7.02984L11.9337 7.03538C12.0255 6.99422 12.1007 6.9309 12.1554 6.85174L12.1562 6.85016C12.22 6.75147 12.2907 6.72324 12.3683 6.76546C12.4023 6.78525 12.4269 6.81691 12.4372 6.85411C12.4387 6.86282 12.4403 6.87469 12.4403 6.88498C12.4403 6.9214 12.4269 6.95543 12.4055 6.98156C12.362 7.0338 12.3018 7.07021 12.2321 7.08208H12.2306C11.9836 7.16203 11.7849 7.23961 11.5918 7.32589L11.6313 7.31006C11.3733 7.41929 11.2123 7.48816 11.1485 7.51666C10.9356 7.61877 10.687 7.70347 10.4274 7.7565L10.406 7.76046C10.2976 7.77471 10.1725 7.78341 10.045 7.78341C9.87564 7.78341 9.70942 7.76837 9.54794 7.74067L9.56535 7.74304C9.49464 7.72932 9.46271 7.73618 9.46957 7.76362C9.51944 7.84199 9.57881 7.90848 9.64847 7.96389L9.65005 7.96547C9.81944 8.11191 10.0419 8.20136 10.2849 8.20136C10.3118 8.20136 10.3379 8.20057 10.364 8.19819H10.3609C10.5002 8.1879 10.6292 8.16178 10.7519 8.12062L10.7408 8.12379C10.892 8.07629 11.0179 8.02563 11.139 7.96785L11.1208 7.97577C11.2411 7.9193 11.3596 7.85756 11.4762 7.79054C11.5928 7.72352 11.6984 7.66336 11.7928 7.61006C11.8633 7.56969 11.9488 7.52695 12.0366 7.48974L12.0525 7.48341C12.0905 7.46362 12.1356 7.45175 12.1839 7.45175C12.2029 7.45175 12.2219 7.45333 12.2401 7.45729H12.2385C12.2876 7.47629 12.3224 7.52061 12.3287 7.57286C12.3279 7.59027 12.324 7.60689 12.3176 7.62193C12.3073 7.64331 12.2931 7.66072 12.2757 7.67418C12.2567 7.69001 12.2361 7.70584 12.2147 7.72009L12.2124 7.72167C12.1912 7.73539 12.1612 7.75307 12.1221 7.77471C12.0831 7.79634 12.0511 7.81217 12.0263 7.8222C12.0015 7.83223 11.9662 7.84991 11.9203 7.87524C11.8926 7.89186 11.8593 7.90769 11.8245 7.92115L11.8197 7.92273C11.5474 8.06917 11.3131 8.22353 11.0947 8.39688L11.1042 8.38896C10.8984 8.55282 10.668 8.7048 10.4234 8.83303L10.3997 8.84491C10.3221 8.89003 10.2295 8.91694 10.1305 8.91694C10.0395 8.91694 9.95322 8.89477 9.87802 8.8544L9.88119 8.85599C9.61205 8.64385 9.38883 8.38738 9.22023 8.0945L9.2131 8.08183C9.05795 7.86283 8.96983 7.78526 8.94872 7.84911C8.94159 7.87603 8.93764 7.9069 8.93764 7.93935V7.95598C8.92893 8.17603 8.87114 8.38026 8.77537 8.56232L8.77932 8.5544C8.67325 8.7771 8.56903 8.97314 8.46665 9.14254C8.36217 9.31985 8.28459 9.52645 8.24501 9.7465L8.24343 9.75758C8.23156 9.81299 8.22443 9.87632 8.22443 9.94123C8.22443 10.1209 8.27668 10.2887 8.36771 10.4296L8.36533 10.4257C8.2028 10.4679 7.98195 10.7861 7.70279 11.3803C7.47719 11.8125 7.30147 12.3128 7.20173 12.8407L7.19619 12.8748C7.18247 13.0014 7.17719 13.2452 7.18036 13.6062C7.1859 13.6568 7.18986 13.7162 7.18986 13.7764C7.18986 13.9386 7.16532 14.0954 7.11941 14.2434L7.12257 14.2323C7.06611 14.4012 6.96373 14.4117 6.81544 14.264C6.57956 14.0051 6.43549 13.6592 6.43549 13.2793C6.43549 13.2753 6.43549 13.2706 6.43549 13.2666C6.43232 13.2223 6.42995 13.1716 6.42995 13.1194C6.42995 12.9619 6.44736 12.8083 6.48061 12.6603L6.47824 12.6745C6.50673 12.5405 6.50304 12.4771 6.46715 12.4845C6.44816 12.4972 6.43312 12.5154 6.4252 12.5368V12.5376C6.32151 12.7663 6.26055 13.0339 6.26055 13.3149C6.26055 13.6774 6.36108 14.0162 6.53523 14.3059L6.53048 14.2972C6.59618 14.4175 6.68563 14.5165 6.79249 14.5925L6.79486 14.5941C6.93629 14.707 7.02072 14.7777 7.04816 14.8062C7.38537 15.1418 7.74554 15.4561 8.12391 15.7458L8.15003 15.7656C8.7437 16.2426 9.07247 16.5131 9.13632 16.5769C9.24476 16.6783 9.31521 16.82 9.32155 16.9783V16.9798C9.32234 16.9893 9.32234 17.0012 9.32234 17.0131C9.32234 17.3693 9.04212 17.6598 8.68988 17.6764H8.68829C8.79357 17.8593 8.89489 18.0136 9.00492 18.1609L8.99542 18.1482C9.1197 18.3113 9.22102 18.5005 9.2883 18.7047L9.29226 18.7181C9.34054 18.9152 9.36746 19.1408 9.36746 19.3735C9.36746 19.406 9.36667 19.4385 9.36587 19.4701V19.4654C9.69095 19.2965 9.71575 18.9714 9.44028 18.4902C9.40704 18.4253 9.36983 18.3698 9.32788 18.3192L9.32946 18.3208C9.28355 18.2643 9.25004 18.2221 9.22893 18.1941C9.20783 18.1661 9.20096 18.145 9.20835 18.1308C9.24318 18.0857 9.28988 18.0508 9.3445 18.031L9.34688 18.0303C9.37142 18.0184 9.4007 18.0121 9.43157 18.0121C9.47986 18.0121 9.52498 18.0287 9.55981 18.0572C9.88488 18.4245 10.4714 18.5511 11.3195 18.4371H11.3242C12.0841 18.4371 12.7601 18.0778 13.1915 17.5205L13.1955 17.5149C13.358 17.2463 13.4781 17.1408 13.5556 17.1983C13.6401 17.2405 13.6754 17.4242 13.6617 17.7493C13.6126 18.1134 13.5271 18.4427 13.4076 18.7545L13.4179 18.7245C13.3744 18.8147 13.349 18.9216 13.349 19.0332C13.349 19.064 13.3506 19.0949 13.3546 19.1258V19.1218C13.3757 19.2242 13.4601 19.2788 13.6079 19.2857C13.629 19.1516 13.6802 18.8796 13.7615 18.4696C13.8224 18.2028 13.8731 17.8767 13.9023 17.545L13.9047 17.5149C13.9055 17.4928 13.9055 17.4667 13.9055 17.4405C13.9055 17.1912 13.8802 16.9482 13.8319 16.7131L13.8359 16.736C13.7844 16.4503 13.7559 16.121 13.7559 15.7854C13.7559 15.7577 13.7559 15.7308 13.7567 15.7038V15.7078C13.7567 15.6975 13.7559 15.6856 13.7559 15.673C13.7559 15.403 13.8477 15.1545 14.0021 14.9574L14.0005 14.9598C14.1216 14.8402 14.2878 14.7658 14.4715 14.7658C14.496 14.7658 14.5206 14.7674 14.5443 14.7698H14.5411C14.5411 14.7666 14.5411 14.7635 14.5411 14.7603C14.5411 14.5133 14.69 14.302 14.9037 14.2102L14.9076 14.2086C15.0731 14.1286 15.267 14.0811 15.4728 14.0811C15.5449 14.0811 15.6153 14.0867 15.6842 14.0977L15.6763 14.097C15.9208 14.1175 16.1425 14.2038 16.3269 14.3376L16.323 14.3352L16.3245 14.3408ZM9.66746 5.57336C9.67459 5.53932 9.67934 5.49974 9.67934 5.45937C9.67934 5.38655 9.66509 5.31689 9.63976 5.25277L9.64134 5.25673C9.60229 5.16491 9.56166 5.11187 9.51944 5.09762C9.45559 5.0839 9.42366 5.10871 9.42366 5.17203C9.43158 5.20053 9.45057 5.22269 9.4759 5.23536H9.47669C9.54741 5.23536 9.57221 5.28839 9.5511 5.39446C9.52999 5.53589 9.55823 5.6066 9.6358 5.6066C9.63738 5.6066 9.63897 5.60739 9.64055 5.60739C9.65559 5.60739 9.66825 5.59473 9.66825 5.57969C9.66825 5.57811 9.66825 5.57494 9.66746 5.57336ZM14.1089 7.6631C14.0995 7.61402 14.0749 7.57207 14.0401 7.54119C14.0013 7.51349 13.9546 7.49528 13.9039 7.48816H13.9023C13.8446 7.47866 13.7923 7.45808 13.7472 7.42879L13.7488 7.42958C13.71 7.40584 13.6768 7.37734 13.6483 7.34489L13.6475 7.34409C13.6158 7.30874 13.591 7.2805 13.5731 7.2594L13.5145 7.19053C13.5018 7.1747 13.4884 7.16045 13.4725 7.14858H13.4717C13.4643 7.14541 13.4501 7.15069 13.429 7.16441C13.3303 7.27734 13.3551 7.4309 13.5034 7.6251C13.6 7.77787 13.7425 7.89503 13.9111 7.95677L13.9166 7.95835C13.9213 7.95914 13.9277 7.95914 13.9332 7.95914C13.9934 7.95914 14.0448 7.92431 14.0702 7.87444L14.071 7.87365C14.0979 7.83012 14.1145 7.77708 14.1145 7.72009C14.1145 7.69872 14.1121 7.67893 14.1082 7.65914V7.66072L14.1089 7.6631ZM12.2226 5.40554C12.2226 5.40475 12.2226 5.40317 12.2226 5.40238C12.2226 5.26465 12.1562 5.14274 12.054 5.06675L12.0532 5.06596C12.011 5.03746 11.9791 5.02691 11.9575 5.0343C11.9527 5.03351 11.948 5.03351 11.9424 5.03351C11.9163 5.03351 11.8918 5.04142 11.872 5.05567C11.8656 5.06042 11.8617 5.06834 11.8617 5.07704C11.8617 5.08575 11.8656 5.09367 11.872 5.09842C11.8862 5.11266 11.9044 5.12375 11.9242 5.13008C12.0229 5.15858 12.087 5.26808 12.115 5.45858C12.115 5.47969 12.1432 5.47283 12.1997 5.438C12.2145 5.42269 12.2219 5.41214 12.2219 5.40634L12.2226 5.40554ZM12.7926 2.93585C12.7894 2.91448 12.7799 2.89627 12.7657 2.88282C12.7387 2.85432 12.7087 2.82978 12.6754 2.81078L12.6738 2.80999C12.6279 2.7815 12.5944 2.76039 12.5733 2.74667C12.5116 2.66751 12.4237 2.61052 12.3232 2.58835L12.32 2.58756H12.3192C12.2654 2.58756 12.2187 2.62002 12.1981 2.66672V2.66751C12.1878 2.69284 12.1815 2.72292 12.1815 2.75379C12.1815 2.772 12.1839 2.7902 12.1878 2.80762V2.80604C12.1926 2.82345 12.1949 2.84324 12.1949 2.86303C12.1949 2.88994 12.1902 2.91527 12.1823 2.93981L12.1831 2.93823C12.168 2.98097 12.1467 3.01818 12.1197 3.04984V3.04905C12.096 3.07675 12.0754 3.10841 12.058 3.14166L12.0564 3.14483C12.049 3.16277 12.0596 3.19285 12.0881 3.23506C12.0992 3.24536 12.1142 3.25169 12.1308 3.25169C12.1474 3.25169 12.1617 3.24536 12.1736 3.23506C12.2021 3.21396 12.2408 3.18203 12.2899 3.13929C12.335 3.09971 12.3881 3.06725 12.4451 3.04509L12.449 3.04351C12.4704 3.03559 12.4949 3.03163 12.5203 3.03163C12.529 3.03163 12.5377 3.03242 12.5456 3.03322H12.5448H12.5496C12.6042 3.03322 12.6572 3.0253 12.7071 3.01105L12.7031 3.01184C12.7451 3.00234 12.7791 2.97464 12.7965 2.93744L12.7926 2.93585ZM18.7816 17.1516C18.9074 17.2244 19.0159 17.3099 19.1093 17.4105L19.1101 17.4113C19.1758 17.4777 19.2217 17.5648 19.2367 17.6622V17.6646C19.2383 17.6804 19.2391 17.6994 19.2391 17.7184C19.2391 17.7849 19.2288 17.8482 19.209 17.9076L19.2106 17.9036C19.1758 17.997 19.1196 18.0754 19.0475 18.1363L19.0467 18.1371C18.9715 18.2068 18.89 18.2741 18.8061 18.3382L18.7982 18.3437C18.7072 18.4094 18.6043 18.4751 18.4958 18.5329L18.4816 18.54C18.3507 18.6107 18.2393 18.6691 18.1475 18.715C18.0557 18.7609 17.9425 18.8155 17.8079 18.8788C17.6734 18.9421 17.5779 18.9881 17.5214 19.0166C17.1763 19.1986 16.8802 19.3957 16.6048 19.6181L16.6151 19.6102C16.319 19.8374 16.0586 20.059 15.8092 20.2934L15.8148 20.2886C15.624 20.4184 15.3889 20.496 15.1356 20.496C15.1214 20.496 15.1063 20.496 15.0921 20.4952H15.0945C15.0406 20.5007 14.9781 20.5039 14.9148 20.5039C14.6385 20.5039 14.3757 20.4437 14.139 20.3369L14.1509 20.3416C14.0266 20.2807 13.9221 20.1968 13.839 20.0947L13.8374 20.0931C13.7717 20.0147 13.714 19.9253 13.6665 19.8303L13.6625 19.8224C13.6103 19.7298 13.5295 19.6577 13.433 19.6174L13.4298 19.6166C13.2865 19.5532 13.1195 19.516 12.9438 19.516C12.9398 19.516 12.9351 19.516 12.9311 19.516C12.6197 19.5086 12.1612 19.5049 11.5538 19.5049C11.4197 19.5049 11.2184 19.5102 10.9498 19.5208C10.6812 19.5313 10.4762 19.5403 10.3348 19.5477C10.0308 19.5509 9.74187 19.6086 9.47511 19.7123L9.49173 19.7068C9.27326 19.7844 9.08408 19.892 8.91785 20.0266L8.92181 20.0234C8.78882 20.1398 8.63684 20.2403 8.47299 20.3203L8.46111 20.3258C8.30834 20.4034 8.12865 20.4493 7.93789 20.4493C7.92126 20.4493 7.90543 20.4493 7.88881 20.4485H7.89118C7.45345 20.3828 7.05925 20.268 6.68958 20.1089L6.72125 20.1208C6.29618 19.953 5.77849 19.7962 5.24576 19.6783L5.17373 19.6648C5.03969 19.6363 4.85948 19.6028 4.63309 19.5643C4.4067 19.5258 4.22992 19.4939 4.10274 19.4685C3.97556 19.4432 3.83598 19.4097 3.684 19.368C3.54944 19.334 3.4307 19.2817 3.32463 19.2113L3.32938 19.2137C3.25181 19.1622 3.19085 19.0925 3.15048 19.0102L3.1489 19.0071C3.12674 18.9295 3.11328 18.8408 3.11328 18.7482C3.11328 18.5851 3.15365 18.4316 3.22489 18.297L3.22252 18.3026C3.29692 18.1387 3.36183 17.9464 3.40854 17.7461L3.41249 17.7247C3.41329 17.7097 3.41329 17.6923 3.41329 17.6748C3.41329 17.5419 3.39745 17.4128 3.36817 17.2894L3.37054 17.3004C3.33518 17.1316 3.29983 16.9814 3.26447 16.85C3.23439 16.744 3.21698 16.6221 3.21698 16.4954C3.21698 16.4843 3.21698 16.4725 3.21777 16.4614V16.463C3.21777 16.4582 3.21777 16.4519 3.21777 16.4463C3.21777 16.3411 3.26051 16.2461 3.32938 16.1772C3.48532 16.083 3.67371 16.0276 3.87556 16.0276C3.89614 16.0276 3.91672 16.0284 3.93651 16.0292H3.93335H3.96422C4.1819 16.0292 4.38929 15.9825 4.5761 15.8986L4.5666 15.9025C4.74154 15.806 4.88877 15.6825 5.0075 15.5344L5.00988 15.5313C5.09062 15.3951 5.1389 15.2313 5.1389 15.0563C5.1389 15.0334 5.13811 15.0104 5.13653 14.9875V14.9906C5.1864 15.0983 5.21569 15.2249 5.21569 15.3579C5.21569 15.673 5.05341 15.9492 4.80724 16.1091L4.80407 16.1115C4.61093 16.2215 4.37979 16.2864 4.13282 16.2864C4.0592 16.2864 3.98717 16.2809 3.91672 16.2698L3.92464 16.2706C3.68453 16.2495 3.53255 16.2849 3.4687 16.3767C3.37687 16.4827 3.39455 16.6841 3.52173 16.9806C3.55023 17.0566 3.57872 17.1192 3.61118 17.1793L3.60722 17.1706C3.64944 17.255 3.67952 17.3184 3.69746 17.3606C3.71725 17.412 3.73387 17.473 3.74416 17.5355L3.74495 17.5411C3.75366 17.5878 3.7592 17.6416 3.7592 17.697C3.7592 17.7239 3.75762 17.7508 3.75524 17.7777V17.7746C3.72833 17.9693 3.66421 18.1442 3.5716 18.3002L3.57477 18.2938C3.48215 18.4363 3.42674 18.6113 3.42674 18.7989V18.8005C3.44785 18.9208 3.57846 19.0126 3.81857 19.0759C3.95999 19.1181 4.25868 19.1836 4.71462 19.2722C5.17057 19.3609 5.52229 19.4332 5.76978 19.4891C5.93865 19.5313 6.20013 19.6089 6.55423 19.7218C6.90832 19.8348 7.19988 19.916 7.42891 19.9656C7.55477 19.9981 7.69962 20.0163 7.84844 20.0163C7.90781 20.0163 7.96717 20.0131 8.02496 20.0076L8.01784 20.0084C8.2838 19.987 8.52048 19.8778 8.70254 19.7108L8.70175 19.7115C8.83869 19.5825 8.92893 19.406 8.94555 19.2081V19.2049C8.94634 19.1852 8.94634 19.1614 8.94634 19.1377C8.94634 18.9406 8.91706 18.7506 8.86165 18.5709L8.8656 18.5844C8.81019 18.373 8.74133 18.1894 8.65663 18.016L8.66455 18.0334C8.59383 17.8957 8.52312 17.7667 8.45241 17.6463C7.86348 16.6719 7.27218 15.836 6.62863 15.0445L6.66109 15.0856C6.18087 14.5627 5.78139 14.4212 5.46265 14.6613C5.38508 14.7252 5.33205 14.6722 5.30355 14.5022C5.28772 14.4144 5.27901 14.3131 5.27901 14.2094C5.27901 14.1706 5.28059 14.1326 5.28297 14.0938V14.0993C5.28693 13.9006 5.32571 13.7115 5.3922 13.5373L5.38825 13.5484C5.46503 13.3561 5.55052 13.1922 5.64867 13.0378L5.64155 13.0497C5.72545 12.9231 5.80303 12.7774 5.86794 12.6246L5.87506 12.6064C5.93153 12.4576 6.0252 12.2033 6.15607 11.8434C6.28694 11.4835 6.39116 11.2077 6.46874 11.0162C6.57639 10.7581 6.68246 10.5452 6.8004 10.341L6.78536 10.3703C6.90331 10.1526 7.04025 9.96577 7.20015 9.79954L7.19935 9.80033C7.71941 9.20665 8.15953 8.52511 8.49357 7.785L8.51415 7.73355C8.42971 6.94198 8.37325 5.84671 8.34475 4.44775C8.34159 4.38521 8.33921 4.31239 8.33921 4.23956C8.33921 3.73692 8.4342 3.25644 8.60755 2.81553L8.59805 2.84166C8.8379 2.35009 9.22893 1.96302 9.71021 1.73504L9.72446 1.72871C10.0173 1.58623 10.3609 1.50391 10.7242 1.50391C10.7606 1.50391 10.7962 1.5047 10.8327 1.50628H10.8279C10.8477 1.50628 10.8714 1.50549 10.8952 1.50549C11.2712 1.50549 11.6353 1.55773 11.9796 1.65589L11.9519 1.64876C12.3121 1.74138 12.6271 1.89336 12.9034 2.09442L12.8955 2.08887C13.3221 2.42133 13.6538 2.8559 13.858 3.35617L13.8651 3.37676C14.0646 3.79075 14.181 4.27756 14.181 4.79129C14.181 4.84353 14.1794 4.89577 14.177 4.94723V4.9401C14.1754 5.00026 14.1739 5.07071 14.1739 5.14195C14.1739 5.87969 14.291 6.59052 14.5071 7.25702L14.4937 7.20874C14.7937 8.1135 15.2773 8.88765 15.9034 9.52011L15.9026 9.51932C16.3348 10.0109 16.6903 10.5832 16.9436 11.2077L16.9578 11.2481C17.2246 11.8299 17.4438 12.5091 17.5816 13.2167L17.5911 13.2745C17.629 13.4748 17.6512 13.7051 17.6512 13.941C17.6512 14.0218 17.6488 14.1017 17.6433 14.1809L17.6441 14.1698C17.633 14.3843 17.5879 14.5846 17.5127 14.7706L17.5174 14.7579C17.4536 14.8993 17.3829 14.9769 17.3053 14.9906C17.2008 15.0302 17.1153 15.1007 17.0575 15.1901L17.056 15.1925C16.9604 15.3128 16.8649 15.4381 16.7694 15.5685C16.6538 15.7149 16.5106 15.8344 16.3475 15.9199L16.3404 15.9231C16.1702 16.0173 15.9676 16.0727 15.7522 16.0727C15.7317 16.0727 15.7111 16.0719 15.6913 16.0711H15.6945C15.5733 16.0656 15.4594 16.0466 15.3501 16.0157L15.3604 16.0181C15.2662 15.9912 15.1855 15.9413 15.1222 15.8748C15.0731 15.8242 15.0264 15.7711 14.982 15.7149L14.9789 15.711C14.9353 15.6484 14.895 15.5772 14.8601 15.5028L14.8562 15.4941C14.8066 15.3917 14.7747 15.3228 14.7604 15.2875C14.6053 15.0263 14.4604 14.9207 14.3258 14.9708C14.1913 15.021 14.0923 15.1941 14.029 15.4901C14.0084 15.6009 13.9965 15.7276 13.9965 15.8574C13.9965 16.0941 14.0353 16.3213 14.1074 16.5334L14.1026 16.5184C14.1739 16.8366 14.2142 17.2023 14.2142 17.5775C14.2142 17.9345 14.1778 18.282 14.1074 18.6184L14.1129 18.5851C14.0884 18.6801 14.0749 18.7902 14.0749 18.9026C14.0749 19.1812 14.1604 19.4408 14.306 19.6546L14.3029 19.6498C14.4636 19.8651 14.7177 20.0021 15.0034 20.0021C15.0288 20.0021 15.0549 20.0013 15.0794 19.9989H15.0762C15.4245 19.9736 15.7356 19.835 15.9794 19.6213L15.9778 19.6229C16.2596 19.3767 16.5699 19.1448 16.8969 18.9366L16.9277 18.9184C17.2356 18.7561 17.599 18.6034 17.9758 18.4822L18.0248 18.4688C18.3359 18.3754 18.6066 18.2432 18.8512 18.0754L18.8409 18.0817C19.0098 17.9508 19.0752 17.8289 19.0372 17.716C18.9842 17.5862 18.8916 17.4825 18.7752 17.4152L18.7721 17.4136C18.6153 17.3171 18.4349 17.2324 18.2441 17.1698L18.2259 17.1643C17.9845 17.078 17.7953 16.8952 17.7027 16.6632L17.7003 16.6577C17.5998 16.4471 17.5404 16.1994 17.5404 15.9389C17.5404 15.9215 17.5404 15.9041 17.5412 15.8867V15.8891C17.5396 15.8724 17.5388 15.8534 17.5388 15.8337C17.5388 15.6611 17.6013 15.5028 17.7058 15.3809L17.705 15.3817C17.7098 15.597 17.7407 15.8028 17.7937 15.9991L17.7897 15.9809C17.8325 16.1463 17.8847 16.2888 17.9496 16.425L17.9433 16.4107C18.0035 16.5263 18.0755 16.626 18.161 16.7131C18.2283 16.7867 18.3011 16.8524 18.3795 16.9118L18.3834 16.9149C18.4399 16.954 18.5159 16.9999 18.6114 17.0527C18.7069 17.1054 18.7644 17.1384 18.7839 17.1516H18.7816Z"
            fill="currentColor"
        ></path>
    </svg>
);

type DownloadLink = {
    label: string;
    url: string;
};

type Tab = {
    name: "Windows" | "MacOS" | "Linux";
    icon: FunctionalComponent<IconProps>;
    color: string;
    links: DownloadLink[];
};

type DownloadAgentModalProps = {
    isOpen: boolean;
    onClose: () => void;
};

export default function DownloadAgentModal({
    isOpen,
    onClose,
}: DownloadAgentModalProps) {
    const [activeTab, setActiveTab] = useState<Tab["name"]>("Windows");
    const modalRef = useRef<HTMLDialogElement | null>(null);

    useEffect(() => {
        const modal = modalRef.current;
        if (!modal) return;

        if (isOpen && !modal.open) {
            modal.showModal();
        } else if (!isOpen && modal.open) {
            modal.close();
        }
    }, [isOpen]);

    const tabs: Tab[] = [
        {
            name: "Windows",
            icon: WindowsIcon,
            color: "text-blue-500",
            links: [
                {
                    label: "Download for Windows (x64)",
                    url: "http://apispider.com/downloads/apispider-agent-windows.zip",
                },
            ],
        },
        {
            name: "MacOS",
            icon: AppleIcon,
            color: "text-slate-700",
            links: [
                {
                    label: "Download for MacOS (Apple Silicon)",
                    url: "http://apispider.com/downloads/apispider-agent-macos-arm.zip",
                },
                {
                    label: "Download for MacOS (Intel)",
                    url: "http://apispider.com/downloads/apispider-agent-macos-intel.zip",
                },
            ],
        },
        {
            name: "Linux",
            icon: LinuxIcon,
            color: "text-stone-500",
            links: [
                {
                    label: "Download for Linux (x64)",
                    url: "http://apispider.com/downloads/apispider-agent-linux.zip",
                },
            ],
        },
    ];

    const currentTab = tabs.find((t) => t.name === activeTab)!;

    return (
        <dialog
            ref={modalRef}
            className="modal modal-bottom sm:modal-middle"
            onClose={onClose}
        >
            <div className="modal-box p-0 bg-base-100 border border-base-300 shadow-2xl overflow-hidden max-w-lg">
                {/* Header */}
                <div className="p-6 border-b border-base-300">
                    <div className="flex justify-between items-start">
                        <div>
                            <h3 className="text-xl font-bold flex items-center gap-2">
                                Download APISpider Agent
                            </h3>
                            <p className="text-sm text-base-content/60 mt-1">
                                Lightweight agent for local API monitoring.
                            </p>
                        </div>
                        <button
                            onClick={onClose}
                            className="btn btn-ghost btn-sm btn-square"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                className="h-5 w-5"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                            >
                                <path
                                    strokeLinecap="round"
                                    strokeLinejoin="round"
                                    strokeWidth={2}
                                    d="M6 18L18 6M6 6l12 12"
                                />
                            </svg>
                        </button>
                    </div>
                </div>

                {/* Tabs */}
                <div className="flex p-2 bg-base-200/50 gap-1">
                    {tabs.map((tab) => (
                        <button
                            key={tab.name}
                            onClick={() => setActiveTab(tab.name)}
                            className={`flex-1 flex flex-col items-center gap-1 py-3 rounded-lg transition-all ${activeTab === tab.name
                                ? "bg-base-100 shadow-sm ring-1 ring-base-300 text-primary"
                                : "text-base-content/40 hover:text-base-content hover:bg-base-300/30"
                                }`}
                        >
                            <tab.icon
                                className={`w-6 h-6 ${activeTab === tab.name ? tab.color : "opacity-40"
                                    }`}
                            />
                            <span className="text-xs font-bold uppercase tracking-wider">
                                {tab.name}
                            </span>
                        </button>
                    ))}
                </div>

                {/* Content */}
                <div className="p-8">
                    <div className="space-y-3">
                        {currentTab.links.map((link, idx) => (
                            <a
                                key={idx}
                                href={link.url}
                                className="btn btn-primary btn-block gap-3 h-14"
                                target="_blank"
                                rel="noopener noreferrer"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    className="h-5 w-5"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                >
                                    <path
                                        strokeLinecap="round"
                                        strokeLinejoin="round"
                                        strokeWidth={2}
                                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                                    />
                                </svg>
                                {link.label}
                            </a>
                        ))}
                    </div>
                </div>

                {/* Footer */}
                <div className="px-6 py-4 bg-base-200/50 border-t border-base-300 flex justify-between items-center">
                    <span className="text-[10px] text-base-content/40"></span>
                    <button className="btn btn-ghost btn-md" onClick={onClose}>
                        Close
                    </button>
                </div>
            </div>

            <form method="dialog" className="modal-backdrop">
                <button onClick={onClose}>close</button>
            </form>
        </dialog>
    );
}